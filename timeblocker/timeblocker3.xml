<Module>
	<ModulePrefs title="Time Blocker" height="800" author_email="leigh765@me.com">
		<Require feature="google.calendar-0.5"/>
	</ModulePrefs>
	<Content type="html">
		<![CDATA[ 
			
				<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 	
				<html> 
					<head><title>Test</title>
					<script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
					  <script src="https://api.trello.com/1/client.js?key=64fc156c61511f09dc91241c5b4f0be1"></script>

					</head>
					<body ng-app> 
						<h5>Pick a Task</h5>
						<!--add a variable for the view-->
						
						<p>Time for the week</p>
							<table>
								<thead><th>Actual</th><th>Est.</th></thead>
								<tbody><td></td><td><input type="text"  name="Ampliseq" /></td></tbody>
							</table>
						 <label>Ampliseq</label>
						 
						 <label>LUX</label>
						 <input type="text" name="LUX" />
						
						<div ng-controller="calendarCntrl">
							<div>
								<a href="#" ng-click="boards()">Generate Trello Token</a>
								<input type="textarea" placeholder= "paste your token here"/>
								<button>Synch with my trello boards</button>
							</div>
							<input type="checkbox" ng-model="checked_projects">Show Projects</input> 
							<input type="checkbox" ng-model="checked_matrix">Show Matrix Options</input>
							<div ng-show="checked_projects">
								<p>add project</p>
							    <ul>
							        <li ng-repeat="project in projects">
							          Name: <input ng-model="project.name">
							          [<a href ng-click="projects.splice($index, 1)">X</a>]
							        </li>
							        <li>
							          [<a href ng-click="projects.push({})">add</a>]
							        </li>
							    </ul>
							</div>
							<div ng-show="checked_matrix">
								<p>add phase</p>
							    <ul>
							        <li ng-repeat="phase in phases">
							          Name: <input ng-model="phase.name">
							          [<a href ng-click="phases.splice($index, 1)">X</a>]
							        </li>
							        <li>
							          [<a href ng-click="phases.push({})">add</a>]
							        </li>
							    </ul>

								<p>add offering</p>
							    <ul>
							        <li ng-repeat="offering in offerings">
							          Name: <input ng-model="offering.name">
							          [<a href ng-click="offerings.splice($index, 1)">X</a>]
							        </li>
							        <li>
							          [<a href ng-click="offerings.push({})">add</a>]
							        </li>
							    </ul> 
						    </div> 
						
							<div>
								Project:
								<span  >
								  <select ng-model="project" ng-options="pr.name for pr in projects">
								    <option value="">-- choose project --</option>
								  </select>
								</span><br/>

								Phase:
								<span  >
								  <select ng-model="phase" ng-options="p.name for p in phases">
								    <option value="">-- choose phase --</option>
								  </select>
								</span><br/>

								Offering:
								<span  >
								  <select ng-model="offering" ng-options="o.name for o in offerings">
								    <option value="">-- choose offering --</option>
								  </select>
								</span><br/>
							</div>
							<center> <button ng-click="event(phase, offering, project)">Add Brick</button> </center>
						</div>
						
						<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.10/angular.min.js"></script> 
						<script>
							
							
							function calendarCntrl($scope, $http) {
							  $scope.offerings = [
							 	{name:'Meeting', value:"0"},
							 	{name:'Documentation', value:"1"},
							 	{name:'Interface Design', value:"2"},
							 	{name:'Visual Deisgn', value:"3"},
							    
							  ];
							  $scope.authTrello = function (){
							  	Trello.authorize('popup','timeblocker' );
							  	console.log("bob");
							  }
							  $scope.boards = function (){
							  	$http.get('https://api.trello.com/1/members/me/boards?key=64fc156c61511f09dc91241c5b4f0be1&token=f34f65c4d044577adf181a538dc229f4f2e1348c1e3ec84073be3322eb0b9e2d').
							  	  success(function(data, status, headers, config) {
							  	    console.log(data);
							  	  }).
							  	  error(function(data, status, headers, config) {
							  	    // called asynchronously if an error occurs
							  	    // or server returns response with an error status.
							  	  });
							  }

							  $scope.phases = [
							  	{name:'Admin', value:"0"},
							  	{name:'RFP', value:"1"},
							  	{name:'Inception', value:"2"},
							  	{name:'Implementation', value:"3"},
							  	{name:'Follow Up', value:"4"}
							     
							   ];
							   $scope.projects = [
							   	{name:'Ampliseq', value:"324"},
							   	{name:'LUX', value:"312"},
							   	{name:'USP', value:"313"},
							   	{name:'Marketing', value:"277"}
							      
							    ];
							   $scope.event = function(phase, offering, project) { 
								var location_add= project.value +"."+phase.value + offering.value;
								var title_add= project.value+"-"+project.name +": "+phase.name +" "+offering.name;
								var eventData = { 
									title: title_add, 
									details: 'details_add', 
									location: location_add, 
									allDay: false
									};
									
								google.calendar.composeEvent(eventData); 


								}
							 
							
							}
							
						</script>
					
				</body> 
				</html>

		]]>
	</Content>
</Module>

